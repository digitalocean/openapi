operationId: functionsAccessKey_create

summary: "Create a Namespace Access Key"

description: |
  Creates a new access key for a serverless functions namespace. 
  The access key can be used to authenticate requests to the namespace's functions.
  The secret key is only returned once upon creation.
  
  To create an access key, send a POST request to `/v2/functions/namespaces/{namespace_id}/keys`.

tags:
  - Functions

parameters:
  - $ref: "parameters.yml#/namespace_id"

requestBody:
  required: true

  content:
    application/json:
      schema:
        $ref: "models/access_key_create_request.yml"
      
      examples:
        Create Access Key:
          value:
            name: "my-function-access-key"

responses:
  "201":
    $ref: "responses/access_key_create.yml"

  "400":
    $ref: "responses/namespace_bad_request.yml"

  "401":
    $ref: "../../shared/responses/unauthorized.yml"

  "404":
    $ref: "responses/namespace_not_found.yml"

  "429":
    $ref: "../../shared/responses/too_many_requests.yml"

  "500":
    $ref: "../../shared/responses/server_error.yml"

  default:
    $ref: "../../shared/responses/unexpected_error.yml"

x-codeSamples:
  - $ref: "examples/curl/create_access_key.yml"

security:
  - bearer_auth:
      - "function:admin"